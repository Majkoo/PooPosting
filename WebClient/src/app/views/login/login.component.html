<div class="m-4" @fadeIn>

  <form #form="ngForm" (ngSubmit)="onSubmit()">
    <div class="w-full pb-md flex-center">
      <img class="invert" src="../../../assets/logo/logo-row.png" alt="PooPosting" height="48" width="221"/>
    </div>

    <div class="mb-md">
      <input
        type="text"
        class="input"
        placeholder="Username or Email"
        name="nickname"
        #name="ngModel"
        [(ngModel)]="loginDto.nickname"
        [ngClass]="name.errors && name.touched && name.dirty ? 'border-warning' : 'border-grey'"
        required
      >
      <div
        class="text-warning dark:text-dark-warning opacity-75 px-sm mt-xs text-regular"
        [@errorAnimation]="name.touched && name.dirty ? 'visible' : 'hidden'"
      >

        <div
          [@errorAnimation]="name.errors && name.errors['required'] ? 'visible' : 'hidden'"
        >
          <span>Username or Email is required</span>
        </div>

      </div>
    </div>

    <div class="mb-md">
      <input
        type="password"
        class="input"
        placeholder="Password"
        name="password"
        #password="ngModel"
        [(ngModel)]="loginDto.password"
        [ngClass]="password.errors && password.touched && password.dirty ? 'border-warning' : 'border-grey'"
        required
      >
      <div
        class="text-warning dark:text-dark-warning opacity-75 px-sm mt-xs text-regular"
        [@errorAnimation]="password.touched && password.dirty ? 'visible' : 'hidden'"
      >

        <div
          [@errorAnimation]="password.errors && password.errors['required'] ? 'visible' : 'hidden'"
        >
          <span>Password is required</span>
        </div>

      </div>
    </div>


    <div class="text-center">

      <button
        class="px-20 py-md bg-cta-500 dark:dark-bg-cta-500 text-white font-bold rounded-lg disabled:opacity-60"
        type="submit"
        [disabled]="form.invalid || awaitSubmit"
      >
        Login
      </button>

      <div
        class="my-md text-grey text-regular"
      >
        Don't have an account?
        <a [routerLink]="['/register']" class="text-cta-500 dark:text-dark-cta">Sign up</a>
      </div>

    </div>

    <div class="flex items-center justify-between mb-md">
      <div class="w-1/3 h-[1px] bg-grayscale-900 dark:dark-bg-grayscale-900"></div>
      <span class="title-small">OR</span>
      <div class="w-1/3 h-[1px] bg-grayscale-900 dark:dark-bg-grayscale-900"></div>
    </div>

    <pp-google-signin (loggedIn)="this.afterLogIn()"/>

  </form>

</div>

<pp-login-popup [dialogVisible]="loginPopupVisible" (dialogVisibleChange)="loginPopupVisible = !loginPopupVisible"/>